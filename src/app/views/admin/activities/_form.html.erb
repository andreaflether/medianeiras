<div class="box box-primary">
  <div class="box-header with-border">
    <h4 class="box-title"><%= actions(action_name) %></h4>
  </div>
 
  <div class="box-body">
    <%= simple_form_for(@activity) do |f| %>
      <div class="form-inputs">
        <div class="row">
          <div class="col-md-8">
            <%= f.input :name %>
          </div>
          <div class="col-md-2">
            <%= f.input :starts_at, as: :string, label: "Inicia às" do %>
              <div class="input-group">
                <div class="input-group-addon">
                  <i class="fa fa-clock-o"></i>
                </div>
                <%= f.input_field :starts_at, 
                  as: :string, 
                  value: hour_format(@activity.starts_at),
                  class: 'timepicker',
                  autocomplete: 'off' 
                %> 
              </div>
            <% end %>
          </div>
          <div class="col-md-2">
            <%= f.input :ends_at, as: :string, label: "Termina às" do %>
              <div class="input-group">
                <div class="input-group-addon">
                  <i class="fa fa-clock-o"></i>
                </div>
                <%= f.input_field :ends_at, 
                  as: :string,
                  value: hour_format(@activity.ends_at),
                  class: 'timepicker' 
                %> 
              </div>
            <% end %>
          </div>
          <div class="col-md-3">
             <%= f.input :max_capacity, input_html: { min: 1 } %>
          </div>
          <div class="col-md-5">
            <%= f.association :location, 
              label_method: :description, 
              value_method: :id,
              prompt: 'Selecione um local',
              input_html: { class: 'location-input' }
            %>
          </div>
          <div class="col-md-4">
            <%= f.association :week_days, 
              collection: @days, 
              label_method: :description,
              value_method: :id, 
              input_html: { multiple: true, class: 'select2', placeholder: 'Selecione um ou mais dias' } %>
          </div> 
        </div>
        <div class="row">
          <div class="col-md-12">
            <%= f.input :description, input_html: { rows: 3 } %>
          </div> 
        </div>
        <div class="row">
          <div class="col-md-6">
             <%= f.association :volunteers, 
              collection: @volunteers, 
              label_method: :person_name, 
              value_method: :id, 
              input_html: { multiple: true, class: 'select2', placeholder: 'Selecione um ou mais responsáveis pela atividade' } %>
          </div>  
          <div class="col-md-6">
            <div class="form-group">
              <%= f.label :display_image %>
              <%= f.input :display_image, 
                wrapper: :custom_file,
                input_html: { 
                  id: 'customFile', 
                  lang: 'pt-br', 
                  'aria-describedby': 'customFile'
                },
                label: image_filename(@activity, f)
              %>

              <div id="preview_actions" class=<%= "hidden" if !has_image(@activity) %>>
                <%= button_tag 'Remover foto', type: 'button', class: 'btn btn-xs btn-danger', id: 'remove_photo' %>   
                <%= button_tag 'Exibir prévia da foto', type: 'button', class: 'btn btn-xs btn-primary', id: 'preview' %>   
              </div>
            </div>
          </div>
        </div>  
        <%= f.association :students, 
          label: 'Alunos', 
          collection: @students, 
          label_method: :person_name, 
          value_method: :id, 
          input_html: { 
            multiple: true, 
            class: 'activity_multiselect'
          } %>    
      </div>
  </div>
  <div class="form-actions box-footer">
    <%= link_to 'Voltar', activities_path, class: 'btn btn-default' %>
    <%= f.button :submit, class: 'btn btn-primary pull-right' %>
  </div>
  <% end %>
</div>

<%= render 'display_photo_preview' %>
<%= render 'admin/shared/locations_modal' %>