<%= search_form_for @q do |f| %>

<div class="box">
  <div class="box-header with-border">
    <h3 class="box-title">Filtros de pesquisa</h3>

    <div class="box-tools pull-right">
      <button type="button" class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip" title="" data-original-title="Minimizar">
        <i class="fa fa-minus"></i></button>
    </div>
  </div>
  <div class="box-body">
    <div class="row">
      <div class="col-md-6">
        <div class="form-group">
          <%= f.label t('activerecord.attributes.event.ransack.title') %>
          <%= f.search_field :title_cont, class: 'form-control' %>
        </div>  
      </div> 
      <div class="col-md-6">
        <div class="form-group">
          <%= f.label t('activerecord.attributes.event.ransack.location') %> <br />
          <%= f.select :location_id_in, 
            options_for_select(Location.all.collect { |l| [ l.description, l.id ] }, 
            params.dig(:q, :location_id_in)),
            { include_hidden: false }, 
            { 
              class: 'form-control select2', 
              multiple: true, 
              data: { placeholder: 'Selecione um ou mais locais'} 
            } 
          %>
        </div>  
      </div> 
    </div>
  </div>

  <div class="box-footer" style="">
    <%= f.submit "Pesquisar", class: "btn btn-primary" %>
  </div>
</div>

<% end %>

<div class="box box-primary data-tables">
  <div class="box-header with-border">
    <h3 class="box-title">Eventos</h3>
  </div>
  <div class="box-body">
    <table class="table table-bordered table-hover table-striped dataTable">
      <thead>
        <tr>
          <th>Título</th>
          <th>Data</th>
          <th>Horário</th>
          <th>Local</th>
          <th>Ações</th>
        </tr>
      </thead>
      <tbody>
        <% @events.each do |event| %>
          <tr>
            <td><%= event.title %></td>
            <td><%= event_date(event.start_date)%></td>
            <td><%= event_time(event.start_date, event.end_date) %></td>
            <td><%= event.location.description %></td>
            <td>
              <%= link_to event_path(event), 
              class: 'btn btn-success btn-sm', 
              title: 'Visualizar evento', 
              data: { toggle: 'tooltip', container: 'body' } do %>
                <i class="fa fa-eye"></i>
              <% end %>
              <%= link_to edit_event_path(event), 
                class: 'btn btn-primary btn-edit btn-sm', 
                title: 'Editar evento', 
                data: { toggle: 'tooltip', container: 'body' } do %>
                <i class="fa fa-pencil"></i>
              <% end %>
              <%= link_to event_path(event), 
                class: 'btn btn-danger btn-sm', 
                method: :delete, 
                title: 'Excluir evento',
                data: { confirm: "Tem certeza que deseja apagar o evento #{event.title.upcase}?", 
                toggle: 'tooltip', container: 'body' } do %>
                <i class="fa fa-trash"></i>
              <% end %>
            </td>                   
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>

<%= link_to new_event_path, class: 'btn btn-primary btn-info btn-hover' do %>
  <i class="fa fa-fw fa-calendar-plus-o"></i><span>&nbsp; Cadastrar evento</span>
<% end %>
<%# <button class="btn btn-primary btn-info btn-hover">
  <i class="fa fa-fw fa-calendar-plus-o"></i><span>&nbsp; Cadastrar evento</span></button> %>
